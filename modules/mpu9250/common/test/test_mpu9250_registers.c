/**@file    test_mpu9250.c
 * @author  Austin Glaser <austin@boulderes.com>
 * @brief   MPU9250 Driver Test Source
 *
 * @addtogroup MPU9250
 * @{
 *
 * @defgroup MPU9250_TEST MPU9250 Driver Tests
 * @{
 */

/* --- PRIVATE DEPENDENCIES ------------------------------------------------ */

/* Test framework */
#include "unity.h"

/* Module under test */
#include "mpu9250_registers.h"

/* Supporting modules */

/* Mocks, fakes, test support */

/* Source dependencies (present only to make Ceedling include the right
 * objects)
 */

/* Standard headers */
#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>

/* --- PRIVATE CONSTANTS --------------------------------------------------- */
/* --- PRIVATE DATATYPES --------------------------------------------------- */
/* --- PRIVATE MACROS ------------------------------------------------------ */
/* --- PRIVATE FUNCTION PROTOTYPES ----------------------------------------- */
/* --- PUBLIC VARIABLES ---------------------------------------------------- */
/* --- PRIVATE VARIABLES --------------------------------------------------- */
/* --- PUBLIC FUNCTIONS ---------------------------------------------------- */
/* --- PUBLIC TESTS -------------------------------------------------------- */

void test_mpu9250_i2c_addr(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x68, MPU9250_I2C_ADDR);
}

void test_mpu9250_read_bit(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x80, MPU9250_READ);
}

void test_mpu9250_register_count(void)
{
    TEST_ASSERT_EQUAL_UINT8(128, MPU9250_REGISTER_COUNT);
}

void test_mpu9250_gyro_self_test(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x00, MPU9250_SELF_TEST_X_GYRO);
    TEST_ASSERT_EQUAL_HEX8(0x01, MPU9250_SELF_TEST_Y_GYRO);
    TEST_ASSERT_EQUAL_HEX8(0x02, MPU9250_SELF_TEST_Z_GYRO);
}

void test_mpu9250_accel_self_test(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x0D, MPU9250_SELF_TEST_X_ACCEL);
    TEST_ASSERT_EQUAL_HEX8(0x0E, MPU9250_SELF_TEST_Y_ACCEL);
    TEST_ASSERT_EQUAL_HEX8(0x0F, MPU9250_SELF_TEST_Z_ACCEL);
}

void test_mpu9250_gyro_offset(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x13, MPU9250_XG_OFFSET_H);
    TEST_ASSERT_EQUAL_HEX8(0x14, MPU9250_XG_OFFSET_L);
    TEST_ASSERT_EQUAL_HEX8(0x15, MPU9250_YG_OFFSET_H);
    TEST_ASSERT_EQUAL_HEX8(0x16, MPU9250_YG_OFFSET_L);
    TEST_ASSERT_EQUAL_HEX8(0x17, MPU9250_ZG_OFFSET_H);
    TEST_ASSERT_EQUAL_HEX8(0x18, MPU9250_ZG_OFFSET_L);
}

void test_mpu9250_smplrt_div(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x19, MPU9250_SMPLRT_DIV);
}

void test_mpu9250_config(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x1A, MPU9250_CONFIG);

    /* RESERVED */
    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_CONFIG_RESERVED_MASK);

    /* FIFO_MODE */
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_CONFIG_FIFO_MODE_MASK);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_CONFIG_FIFO_MODE_PRESERVE);
    TEST_ASSERT_EQUAL_HEX8(0 << 6, MPU9250_CONFIG_FIFO_MODE_OVERWRITE);

    /* EXT_SYNC */
    TEST_ASSERT_EQUAL_HEX8(7 << 3, MPU9250_CONFIG_EXT_SYNC_SET_MASK);
    TEST_ASSERT_EQUAL_HEX8(0 << 3, MPU9250_CONFIG_EXT_SYNC_SET_OFF);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_CONFIG_EXT_SYNC_SET_TEMP_OUT_L0);
    TEST_ASSERT_EQUAL_HEX8(2 << 3, MPU9250_CONFIG_EXT_SYNC_SET_GYRO_XOUT_L0);
    TEST_ASSERT_EQUAL_HEX8(3 << 3, MPU9250_CONFIG_EXT_SYNC_SET_GYRO_YOUT_L0);
    TEST_ASSERT_EQUAL_HEX8(4 << 3, MPU9250_CONFIG_EXT_SYNC_SET_GYRO_ZOUT_L0);
    TEST_ASSERT_EQUAL_HEX8(5 << 3, MPU9250_CONFIG_EXT_SYNC_SET_ACCEL_XOUT_L0);
    TEST_ASSERT_EQUAL_HEX8(6 << 3, MPU9250_CONFIG_EXT_SYNC_SET_ACCEL_YOUT_L0);
    TEST_ASSERT_EQUAL_HEX8(7 << 3, MPU9250_CONFIG_EXT_SYNC_SET_ACCEL_ZOUT_L0);

    /* DLPF_CFG */
    TEST_ASSERT_EQUAL_HEX8(7 << 0, MPU9250_CONFIG_DLPF_CFG_MASK);
    TEST_ASSERT_EQUAL_HEX8(7 << 0, MPU9250_CONFIG_DLPF_CFG_3600HZ);
    TEST_ASSERT_EQUAL_HEX8(0 << 0, MPU9250_CONFIG_DLPF_CFG_250HZ);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_CONFIG_DLPF_CFG_184HZ);
    TEST_ASSERT_EQUAL_HEX8(2 << 0, MPU9250_CONFIG_DLPF_CFG_92HZ);
    TEST_ASSERT_EQUAL_HEX8(3 << 0, MPU9250_CONFIG_DLPF_CFG_41HZ);
    TEST_ASSERT_EQUAL_HEX8(4 << 0, MPU9250_CONFIG_DLPF_CFG_20HZ);
    TEST_ASSERT_EQUAL_HEX8(5 << 0, MPU9250_CONFIG_DLPF_CFG_10HZ);
    TEST_ASSERT_EQUAL_HEX8(6 << 0, MPU9250_CONFIG_DLPF_CFG_5HZ);
}

void test_mpu9250_gyro_config(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x1B, MPU9250_GYRO_CONFIG);

    /* [XYZ]GYRO_CTEN  */
    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_GYRO_CONFIG_XGYRO_CTEN);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_GYRO_CONFIG_YGYRO_CTEN);
    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_GYRO_CONFIG_ZGYRO_CTEN);

    /* GYRO_FS_SEL */
    TEST_ASSERT_EQUAL_HEX8(3 << 3, MPU9250_GYRO_CONFIG_GYRO_FS_SEL_MASK);
    TEST_ASSERT_EQUAL_HEX8(0 << 3, MPU9250_GYRO_CONFIG_GYRO_FS_SEL_250DPS);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_GYRO_CONFIG_GYRO_FS_SEL_500DPS);
    TEST_ASSERT_EQUAL_HEX8(2 << 3, MPU9250_GYRO_CONFIG_GYRO_FS_SEL_1000DPS);
    TEST_ASSERT_EQUAL_HEX8(3 << 3, MPU9250_GYRO_CONFIG_GYRO_FS_SEL_2000DPS);

    /* FCHOICE_B */
    TEST_ASSERT_EQUAL_HEX8(3 << 0, MPU9250_GYRO_CONFIG_FCHOICE_B_MASK);
    /* High-order bit is don't care if FCHOICE_B low-order bit is high */
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_GYRO_CONFIG_FCHOICE_B_8800HZ & 1);
    TEST_ASSERT_EQUAL_HEX8(2 << 0, MPU9250_GYRO_CONFIG_FCHOICE_B_3600HZ);
    TEST_ASSERT_EQUAL_HEX8(0 << 0, MPU9250_GYRO_CONFIG_FCHOICE_B_DLPF_CFG);
}

void test_mpu9250_accel_config(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x1C, MPU9250_ACCEL_CONFIG);

    /* A[XYZ]_ST_EN */
    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_ACCEL_CONFIG_AX_ST_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_ACCEL_CONFIG_AY_ST_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_ACCEL_CONFIG_AZ_ST_EN);

    /* ACCEL_FS_SEL */
    TEST_ASSERT_EQUAL_HEX8(3 << 3, MPU9250_ACCEL_CONFIG_ACCEL_FS_SEL_MASK);
    TEST_ASSERT_EQUAL_HEX8(0 << 3, MPU9250_ACCEL_CONFIG_ACCEL_FS_SEL_2G);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_ACCEL_CONFIG_ACCEL_FS_SEL_4G);
    TEST_ASSERT_EQUAL_HEX8(2 << 3, MPU9250_ACCEL_CONFIG_ACCEL_FS_SEL_8G);
    TEST_ASSERT_EQUAL_HEX8(3 << 3, MPU9250_ACCEL_CONFIG_ACCEL_FS_SEL_16G);
}

void test_mpu9250_accel_config_2(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x1D, MPU9250_ACCEL_CONFIG_2);

    /* ACCEL_FCHOICE_B */
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_ACCEL_CONFIG_2_ACCEL_FCHOICE_B_MASK);
    TEST_ASSERT_EQUAL_HEX8(0 << 3, MPU9250_ACCEL_CONFIG_2_ACCEL_FCHOICE_B_A_DLPFCFG);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_ACCEL_CONFIG_2_ACCEL_FCHOICE_B_1130Hz);

    /* A_DLPFCFG */
    TEST_ASSERT_EQUAL_HEX8(7 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_MASK);
    TEST_ASSERT_EQUAL_HEX8(0 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_460HZ);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_184HZ);
    TEST_ASSERT_EQUAL_HEX8(2 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_92HZ);
    TEST_ASSERT_EQUAL_HEX8(3 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_41HZ);
    TEST_ASSERT_EQUAL_HEX8(4 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_20HZ);
    TEST_ASSERT_EQUAL_HEX8(5 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_10HZ);
    TEST_ASSERT_EQUAL_HEX8(6 << 0, MPU9250_ACCEL_CONFIG_2_A_DLPFCFG_5HZ);
}

void test_mpu9250_lp_accel_odr(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x1E, MPU9250_LP_ACCEL_ODR);

    TEST_ASSERT_EQUAL_UINT8(11, MPU9250_LP_ACCEL_ODR_MAX);

    /* LPOSC_CLKSEL */
    TEST_ASSERT_EQUAL_HEX8(15 << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_MASK);
    TEST_ASSERT_EQUAL_HEX8(0  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_0p24HZ);
    TEST_ASSERT_EQUAL_HEX8(1  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_0p49HZ);
    TEST_ASSERT_EQUAL_HEX8(2  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_0p98HZ);
    TEST_ASSERT_EQUAL_HEX8(3  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_1p95HZ);
    TEST_ASSERT_EQUAL_HEX8(4  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_3p91HZ);
    TEST_ASSERT_EQUAL_HEX8(5  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_7p81HZ);
    TEST_ASSERT_EQUAL_HEX8(6  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_15p63HZ);
    TEST_ASSERT_EQUAL_HEX8(7  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_31p25HZ);
    TEST_ASSERT_EQUAL_HEX8(8  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_62p50HZ);
    TEST_ASSERT_EQUAL_HEX8(9  << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_125HZ);
    TEST_ASSERT_EQUAL_HEX8(10 << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_250HZ);
    TEST_ASSERT_EQUAL_HEX8(11 << 0, MPU9250_LP_ACCEL_ODR_LPOSC_CLKSEL_500HZ);
}

void test_mpu9250_wom_thr(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x1F, MPU9250_WOM_THR);
}

void test_mpu9250_fifo_en(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x23, MPU9250_FIFO_EN);

    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_FIFO_EN_TEMP_OUT);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_FIFO_EN_GYRO_XOUT);
    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_FIFO_EN_GYRO_YOUT);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_FIFO_EN_GYRO_ZOUT);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_FIFO_EN_ACCEL);
    TEST_ASSERT_EQUAL_HEX8(1 << 2, MPU9250_FIFO_EN_SLV_2);
    TEST_ASSERT_EQUAL_HEX8(1 << 1, MPU9250_FIFO_EN_SLV_1);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_FIFO_EN_SLV_0);
}

void test_mpu9250_int_pin_cfg(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x37, MPU9250_INT_PIN_CFG);

    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_INT_PIN_CFG_RESERVED_MASK);

    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_INT_PIN_CFG_ACTL);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_INT_PIN_CFG_OPEN);
    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_INT_PIN_CFG_LATCH_INT_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_INT_PIN_CFG_INT_ANYRD_2CLEAR);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_INT_PIN_CFG_ACTL_FSYNC);
    TEST_ASSERT_EQUAL_HEX8(1 << 2, MPU9250_INT_PIN_CFG_FSYNC_INT_MODE_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 1, MPU9250_INT_PIN_CFG_BYPASS_EN);
}

void test_mpu9250_int_enable(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x38, MPU9250_INT_ENABLE);

    TEST_ASSERT_EQUAL_HEX8((1 << 7) | (1 << 5) | (3 << 1),
                           MPU9250_INT_ENABLE_RESERVED_MASK);

    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_INT_ENABLE_WOM_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_INT_ENABLE_FIFO_OVERFLOW_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_INT_ENABLE_FSYNC_INT_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_INT_ENABLE_RAW_RDY_EN);
}

void test_mpu9250_int_status(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x3A, MPU9250_INT_STATUS);

    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_INT_STATUS_WOM_INT);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_INT_STATUS_FIFO_OVERFLOW_INT);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_INT_STATUS_FSYNC_INT);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_INT_STATUS_RAW_RDY_INT);
}

void test_mpu9250_data_registers(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x3B, MPU9250_ACCEL_XOUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x3C, MPU9250_ACCEL_XOUT_L);
    TEST_ASSERT_EQUAL_HEX8(0x3D, MPU9250_ACCEL_YOUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x3E, MPU9250_ACCEL_YOUT_L);
    TEST_ASSERT_EQUAL_HEX8(0x3F, MPU9250_ACCEL_ZOUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x40, MPU9250_ACCEL_ZOUT_L);
    TEST_ASSERT_EQUAL_HEX8(0x41, MPU9250_TEMP_OUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x42, MPU9250_TEMP_OUT_L);
    TEST_ASSERT_EQUAL_HEX8(0x43, MPU9250_GYRO_XOUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x44, MPU9250_GYRO_XOUT_L);
    TEST_ASSERT_EQUAL_HEX8(0x45, MPU9250_GYRO_YOUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x46, MPU9250_GYRO_YOUT_L);
    TEST_ASSERT_EQUAL_HEX8(0x47, MPU9250_GYRO_ZOUT_H);
    TEST_ASSERT_EQUAL_HEX8(0x48, MPU9250_GYRO_ZOUT_L);
}

void test_mpu9250_signal_path_reset(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x68, MPU9250_SIGNAL_PATH_RESET);

    TEST_ASSERT_EQUAL_HEX8(1 << 2, MPU9250_SIGNAL_PATH_RESET_GYRO_RST);
    TEST_ASSERT_EQUAL_HEX8(1 << 1, MPU9250_SIGNAL_PATH_RESET_ACCEL_RST);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_SIGNAL_PATH_RESET_TEMP_RST);
}

void test_mpu9250_mot_detect_ctrl(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x69, MPU9250_MOT_DETECT_CTRL);

    TEST_ASSERT_EQUAL_HEX8(0x3F << 0, MPU9250_MOT_DETECT_CTRL_RESERVED_MASK);

    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_MOT_DETECT_CTRL_ACCEL_INTEL_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_MOT_DETECT_CTRL_ACCEL_INTEL_MODE);
}

void test_mpu9250_user_ctrl(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x6A, MPU9250_USER_CTRL);

    TEST_ASSERT_EQUAL_HEX8((1 << 7) | (1 << 3),
                           MPU9250_USER_CTRL_RESERVED_MASK);

    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_USER_CTRL_FIFO_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_USER_CTRL_I2C_MST_EN);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_USER_CTRL_I2C_IF_DIS);
    TEST_ASSERT_EQUAL_HEX8(1 << 2, MPU9250_USER_CTRL_FIFO_RST);
    TEST_ASSERT_EQUAL_HEX8(1 << 1, MPU9250_USER_CTRL_I2C_MST_RST);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_USER_CTRL_SIG_COND_RST);
}

void test_mpu9250_pwr_mgmt_1(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x6B, MPU9250_PWR_MGMT_1);

    TEST_ASSERT_EQUAL_HEX8(1 << 7, MPU9250_PWR_MGMT_1_H_RESET);
    TEST_ASSERT_EQUAL_HEX8(1 << 6, MPU9250_PWR_MGMT_1_SLEEP);
    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_PWR_MGMT_1_CYCLE);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_PWR_MGMT_1_GYRO_STANDBY);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_PWR_MGMT_1_PD_PTAT);

    TEST_ASSERT_EQUAL_HEX8(7 << 0, MPU9250_PWR_MGMT_1_CLKSEL_MASK);
    TEST_ASSERT_EQUAL_HEX8(7 << 0, MPU9250_PWR_MGMT_1_CLKSEL_DISABLE);

    if (!(MPU9250_PWR_MGMT_1_CLKSEL_INTOSC == (0 << 0)
            || MPU9250_PWR_MGMT_1_CLKSEL_INTOSC == (6 << 0))) {
        TEST_FAIL_MESSAGE("Invalid value for PWR_MGMT_1 clock source");
    }

    if (!(MPU9250_PWR_MGMT_1_CLKSEL_AUTO == (1 << 0)
            || MPU9250_PWR_MGMT_1_CLKSEL_AUTO == (2 << 0)
            || MPU9250_PWR_MGMT_1_CLKSEL_AUTO == (3 << 0)
            || MPU9250_PWR_MGMT_1_CLKSEL_AUTO == (4 << 0)
            || MPU9250_PWR_MGMT_1_CLKSEL_AUTO == (5 << 0))) {
        TEST_FAIL_MESSAGE("Invalid value for PWR_MGMT_1 clock source");
    }
}

void test_mpu9250_pwr_mgmt_2(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x6C, MPU9250_PWR_MGMT_2);

    TEST_ASSERT_EQUAL_HEX8(3 << 6, MPU9250_PWR_MGMT_2_RESERVED_MASK);

    TEST_ASSERT_EQUAL_HEX8(1 << 5, MPU9250_PWR_MGMT_2_DISABLE_XA);
    TEST_ASSERT_EQUAL_HEX8(1 << 4, MPU9250_PWR_MGMT_2_DISABLE_YA);
    TEST_ASSERT_EQUAL_HEX8(1 << 3, MPU9250_PWR_MGMT_2_DISABLE_ZA);
    TEST_ASSERT_EQUAL_HEX8(1 << 2, MPU9250_PWR_MGMT_2_DISABLE_XG);
    TEST_ASSERT_EQUAL_HEX8(1 << 1, MPU9250_PWR_MGMT_2_DISABLE_YG);
    TEST_ASSERT_EQUAL_HEX8(1 << 0, MPU9250_PWR_MGMT_2_DISABLE_ZG);
}

void test_mpu9250_fifo(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x72, MPU9250_FIFO_COUNTH);
    TEST_ASSERT_EQUAL_HEX8(0x73, MPU9250_FIFO_COUNTL);
    TEST_ASSERT_EQUAL_HEX8(0x74, MPU9250_FIFO_R_W);
}

void test_mpu9250_who_am_i(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x75, MPU9250_WHO_AM_I);
    TEST_ASSERT_EQUAL_HEX8(0x71, MPU9250_WHO_AM_I_VALUE);
}

void test_mpu9250_accel_offset(void)
{
    TEST_ASSERT_EQUAL_HEX8(0x77, MPU9250_XA_OFFSET_H);
    TEST_ASSERT_EQUAL_HEX8(0x78, MPU9250_XA_OFFSET_L);
    TEST_ASSERT_EQUAL_HEX8(0x79, MPU9250_YA_OFFSET_H);
    TEST_ASSERT_EQUAL_HEX8(0x7A, MPU9250_YA_OFFSET_L);
    TEST_ASSERT_EQUAL_HEX8(0x7B, MPU9250_ZA_OFFSET_H);
    TEST_ASSERT_EQUAL_HEX8(0x7C, MPU9250_ZA_OFFSET_L);
}

/* --- PRIVATE FUNCTION DEFINITIONS ---------------------------------------- */

/** @} defgroup MPU9250_TEST */
/** @} addtogroup MPU9250 */
